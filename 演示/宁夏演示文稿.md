各位评委专家大家好

​		下面由我来进行云平台的操作演示。本次演示使用的是和宇云平台，该平台已经通过国家医保局重庆实验室的测试认证，目前已经在全国上线并支撑6个省份的医保系统运行。

​		本次演示我们将从七个方面进行演示，首先我们进行数据中心A、B容灾演示；这里我们可以看到两个浏览器访问窗口，分别对应生产中心与灾备中心；和宇云容灾服务是支撑生产中心发生不可恢复的灾难性故障之后，能快速将业务生产切换至灾备中心，保障业务平台正常稳定运行。

​		容灾服务最基础的配置信息为组件实例的容灾关系搭建，这里在和宇云平台体现为灾备组；

​		操作 -- 进入灾备组管理界面

​		我们新增一个灾备组信息，输入名称，选择对应的灾备组件；国家医疗保障局项目所需容灾的中间件有redis、fastdfs、kafka；这里我们选择redis；

​		下一步选择容灾实例，我们可以看到A、B两个中心的redis实例列表，列表里面展示了部署在对应中心的redis集群实例信息。我们选择A中心实例信息XX，选择B中心的实例信息XX；点击下一步，最后进行容灾关系信息的确认，可以看到灾备组名称，灾备组类型，选择的a、b中心的组件实例信息；同时在这里还可以点击立即执行正向同步，正向同步是指将A、B两个中心的redis组件实例构建成主备关系，实现数据实时同步，在A中心写入数据，B中心的实例信息就会马上同步写入的数据信息。

​		应用的容灾关系搭建，在和宇云平台分为两个步骤为应用同步关系绑定，应用同步任务配置；首先我们添加一个绑定关系，绑定关系类型由项目、开发团队两个类型；项目就是咋们医保项目，比如：医疗保障局项目核心经办、医疗保障局公共服务区可以区分为两个项目；开发团队是一个多租户的概念，医保项目到时候会有多个开发商参与，在平台体现就是多个开发团队，开发团队相互隔离。这里我们可以选择两个中心的项目信息进行同步，选择核心经办来构建同步关系，最后核实项目同步的关系信息，点击保存。

​	之后我们来构建同步任务，同步任务这里有两个任务类型，分别为应用版本同步，项目信息同步；应用版本同步即为将两个数据中台应用的版本信息同步，我们到生产中心发布版本，灾备中心就自动发布了，无需运维人员两边都去发布。；项目信息同步，这里就是将项目里面的应用配置信息同步，这样两边的配置也就一模一样了，达到的效果也是一样，无需运维人员两边去操作。构建好同步任务之后，我们的容灾关系大体就已经完成。

​		下面我们进入负载均衡器，选择这次演示的负载均衡实例，双击进入我们可以看到实例的基本信息，看到当前负载均衡实例的对外访问地址为：172.18.40.88；业务对外的访问地址是IP+端口+应用访问路径，这里我们对应的端口信息为服务监听，选择顶部tab服务监听，可以看到维护了一条端口为20004的服务监听数据；然后对外访问的应用路径叫做转发规则，三者结合实现业务访问；

​		在这个负载均衡器下面真正提供服务能力的其实是应用的后端服务器，后端服务器在和宇云平台定义为虚拟服务器组；我们新增一个虚拟服务组，这里我们可以监听不同可用区的应用集群服务器信息；双击选择，然后我们配置真实提供服务的端口：8085，以及选择不同负载类别：工作后端、备支后端；工作后端是优先提供业务服务能力的节点，当工作后端异常不可以时，备支后端会自动提供业务访问能力。

​		维护好配置信息之后，我们还需将配置信息进行下发；之后我们演示业务的访问多活能力，在演示这之前我们打开平台应用中心，结合应用中心大家会更加直观了解业务访问的多活能力。

​	首先我们找到对应应用，对应的后端实例信息，这里我们可以看到和我们刚才填写的虚拟服务组是一一对应上的，首页我们访问负载均衡器对外的地址：http://172.18.40.88:20004/pms/biz/outpatient/bizc2201，可以正常访问，然后我们把对应工作后端的服务节点停止，看负载均衡器的监控信息，已经下线，再来访问，还是正常。



























































​		本次演示我们将从七个方面进行演示，首先我们进行数据中心A、B容灾演示；这里我们可以看到两个浏览器访问窗口，分别对应生产中心与灾备中心；和宇云容灾服务是支撑生产中心发生不可恢复的灾难性故障之后，能快速将业务生产切换至灾备中心，保障业务平台正常稳定运行。

​		容灾服务最基础的配置信息为组件实例的容灾关系搭建，这里在和宇云平台体现为灾备组；

​		操作 -- 进入灾备组管理界面

​		我们新增一个灾备组信息，输入名称，选择对应的灾备组件；国家医疗保障局项目所需容灾的中间件有redis、fastdfs、kafka；这里我们选择redis；

​		下一步选择容灾实例，我们可以看到A、B两个中心的redis实例列表，列表里面展示了部署在对应中心的redis集群实例信息。我们选择A中心实例信息XX，选择B中心的实例信息XX；点击下一步，最后进行容灾关系信息的确认，可以看到灾备组名称，灾备组类型，选择的a、b中心的组件实例信息；同时在这里还可以点击立即执行正向同步，正向同步是指将A、B两个中心的redis组件实例构建成主备关系，实现数据实时同步，在A中心写入数据，B中心的实例信息就会马上同步写入的数据信息。

​		应用的容灾关系搭建，在和宇云平台分为两个步骤为应用同步关系绑定，应用同步任务配置；首先我们添加一个绑定关系，绑定关系类型由项目、开发团队两个类型；项目就是咋们医保项目，比如：医疗保障局项目核心经办、医疗保障局公共服务区可以区分为两个项目；开发团队是一个多租户的概念，医保项目到时候会有多个开发商参与，在平台体现就是多个开发团队，开发团队相互隔离。这里我们可以选择两个中心的项目信息进行同步，选择核心经办来构建同步关系，最后核实项目同步的关系信息，点击保存。

​	之后我们来构建同步任务，同步任务这里有两个任务类型，分别为应用版本同步，项目信息同步；应用版本同步即为将两个数据中台应用的版本信息同步，我们到生产中心发布版本，灾备中心就自动发布了，无需运维人员两边都去发布。；项目信息同步，这里就是将项目里面的应用配置信息同步，这样两边的配置也就一模一样了，达到的效果也是一样，无需运维人员两边去操作。构建好同步任务之后，我们的容灾关系大体就已经完成。

​		下面我们进入负载均衡器，选择这次演示的负载均衡实例，双击进入我们可以看到实例的基本信息，看到当前负载均衡实例的对外访问地址为：172.18.40.88；业务对外的访问地址是IP+端口+应用访问路径，这里我们对应的端口信息为服务监听，选择顶部tab服务监听，可以看到维护了一条端口为20004的服务监听数据；然后对外访问的应用路径叫做转发规则，三者结合实现业务访问；

​		在这个负载均衡器下面真正提供服务能力的其实是应用的后端服务器，后端服务器在和宇云平台定义为虚拟服务器组；我们新增一个虚拟服务组，这里我们可以监听不同可用区的应用集群服务器信息；双击选择，然后我们配置真实提供服务的端口：8085，以及选择不同负载类别：工作后端、备支后端；工作后端是优先提供业务服务能力的节点，当工作后端异常不可以时，备支后端会自动提供业务访问能力。

​		维护好配置信息之后，我们还需将配置信息进行下发；之后我们演示业务的访问多活能力，在演示这之前我们打开平台应用中心，结合应用中心大家会更加直观了解业务访问的多活能力。

​	首先我们找到对应应用，对应的后端实例信息，这里我们可以看到和我们刚才填写的虚拟服务组是一一对应上的，首页我们访问负载均衡器对外的地址：http://172.18.40.88:20004/pms/biz/outpatient/bizc2201，可以正常访问，然后我们把对应工作后端的服务节点停止，看负载均衡器的监控信息，已经下线，再来访问，还是正常。









​		本次的演示环境是远程公司机房搭建的演示环境，这里我们可以看到两个浏览器访问窗口，分别对应生产中心、灾备中心；







​		本次的演示环境是部署在两台笔记本上面，和宇云平台可以对接多个业务服务中心，由项目进行隔离处理，分别对应生产中心、灾备中心；











​		首先我们进行数据中心A、B容灾演示，和宇容灾中心是支撑数据A中心发生不可恢复的灾难性故障，能快速的将业务生产切换至数据B中心，业务在最小感知的情况下进行快速恢复，目前已经在新疆上线并多次容灾演练切换。

​		这里我们可以进入到容灾中心-灾备组管理，这里是对底层支撑中间件的一个灾备关系的管理，可以定义分布式缓存、消息队列等各种生产组件的灾备关系；再进入到容灾中心-同步关系绑定，这里是对两个中心的应用的关系的绑定，这里可以选择所需项目的对应关系，这样我们就可以将a、b数据中心的应用同步，版本、配置都实时同步生效。

​		然后我们进入容灾中心-容灾计划，这里我们可以快速进行生产与灾备中心的切换，我们简单演示一下。



​		我们进入生产A中心的云平台进行PaaS统一平台的演示流程

​		和宇云PaaS平台提供但不限于以下组件，分布式服务、缓存服务、消息队列服务、分布式日志服务、服务网关、业务实时日志监控、容灾管理、dns控制器、服务器负载均衡软件等组件产品；所有的支撑组件产品平台全部由一个入口进入，简化使用复杂度。



我们下面对几个核心组件进行一个简单的介绍

​		首先我们进入分布式服务演示

​		分布式服务是支撑医保业务项目应用快速落地的组件服务，可以快速的将国家下发的应用程序包部署到云平台上面，支持版本升级，版本出现问题可以及时回滚，等一些操作；

​		我们进入到分布式服务-应用管理，这里我们管理的是所有医保下发的应用信息，然后针对每一个应用可以进行部署，可以部署一次性部署多个节点；可以针对部署好的节点进行启停操作；

​		......

​		下面我们进入服务网关演示

​		服务网关是医保提供对外API接口核心组件，管理所有医保对外的api接口，提供账户鉴权，熔断、黑白名单的控制，支持每一个接入的医院都分配一个账户进行控制，精细化管控；同时采集了每一个接口，每一个账户调用的流量，通过咋们的服务网关可以知道门诊结算、住院结算等API接口调用了多少次；

​	下面我们演示一下具体一下功能：。。。。。



​	下面我们进入业务实时监控演示

​			在医保的场景中，咋们是非常关心实时就医结算的；要知道每天实时的就医情况，大屏能实时监控显示。这里我们就有一个业务实时监控的组件来满足这个场景；宁夏今天有多少个人办理了门诊，办理了住院，总共多少费用等等这类似的业务数据；业务系统写入到日志文件，业务实时监控组件实时采集日志文件，实时计算，实时存储，再通过api提供出来，这样业务大屏数据就能够采集到了。

​		演示一下具体的一个功能配置。。。

​	下面DNS控制器演示

​		DNS控制器是云平台内部的域名解析组件，平台使用者可以关注点就不在IP上了，配置都是使用的域名方式。dns控制器也是容灾切换的核心组件，两边的应用配置都是使用域名来配置，一份配置两个数据中心都可以用，减少误操作配置。

​	

​	下面进入到我们最后一个演示点，负载均衡软件演示

​	负载均衡软件是医保业务应用多节点负载、多活的重要组件，我们实际部署医保业务应用是多节点部署，对外如何提供服务，这里就需要负载均衡组件；对外大家访问负载均衡软件地址，由负载均衡软件负载轮询调度，合理分配请求，将请求分散到各个节点上面，这样就能将各个节点的资源利用起来。

​	进入具体的功能演示。











1. 分布式服务
   分布式服务是用来支撑和部署医保业务应用的，包括中台和子系统。现在我们看到的就是已经部署的医保应用清单，在分布式服务管理功能中，我们可以配置应用参数、发布版本升级、查看应用的部署实例等

2. 缓存服务
   现在打开的是缓存服务功能，在这里我们可以对部署的缓存服务器进行管理，查看缓存内容，分析慢键等。。。

3. 消息队列服务

4. 分布式日志服务
   分布式日志服务负责按配置收集各服务器的实时日志信息，集中管理，提供搜索功能，帮助分析系统运行问题

5. 服务网关
   服务网关是医保系统外部的入口，医院药店、银行等外部单位都需要通过服务网关来访问医保提供的服务

6. 业务实时日志监控
   业务实时日志监控是用于实时采集业务程序输出的数据日志，按照配置对数据进行实时清洗、统计分析，服务于电子运行大屏等需要查看医保业务实时发生情况的场景

7. 容灾管理
   容灾管理是提供医保业务实现双数据中心部署运行，业务双活，数据实时同步的，提供了容灾关系配置，灾备切换等功能

8. DNS控制器
   DNS控制器用于将云内资源由IP地址访问转换为固定域名访问的能力，可以实现资源网络调整时系统配置保持相对固定不变，同时也是算数据中心容灾切换的重要支撑能力。