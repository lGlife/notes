挂载磁盘

### 查看磁盘

fdisk -l

### 这里假如看到的磁盘是 /dev/vdb，并且打算将它挂载到 /mysql 目录。

### 为磁盘创建物理卷

pvcreate /dev/vdb



### 为物理卷创建 mysqlvg 卷组

vgcreate mysqlvg /dev/vdb

### 从卷组 mysqlvg 中分配 100% 的空间为逻辑卷 mysqllv

lvcreate -n mysqllv -l 100%VG mysqlvg

### 将逻辑卷格式化

mkfs.xfs /dev/mysqlvg/mysqllv

### 创建挂载目录 /mysql

mkdir  /mysql

### 将逻辑卷挂载到 /mysql 目录

mount /dev/mapper/mysqlvg-mysqllv /mysql/

### 设置开机自挂载

echo "/dev/mapper/mysqlvg-mysqllv  /mysql  xfs  defaults  0 0" >> /etc/fstab


磁盘扩展指南：

### 先新增一块 200G 的磁盘 sd[a-z]，这里比如是 sdc

### 将 sdc 创建为物理卷

pvcreate /dev/sdc

### 将物理卷 sdc 的空间扩展到 data 卷组(卷组可以使用 vgdisplay 查看)

vgextend data /dev/sdc

### 将该卷组所有可用空间分配给逻辑卷 data-datalv (逻辑卷可以通过 lvdisplay)

lvextend  -l +100%FREE /dev/mapper/data-datalv

### 让文件系统重新加载大小(由于我们的逻辑卷默认格式化为 xfs 所以这里使用下面的命令，其它格式命令不同)

xfs_growfs  /dev/mapper/data-datalv

磁盘缩小指南：

### 将逻辑卷缩小指定大小

### 警告：这一步可能会损坏数据，所以需要提前做好备份

lvreduce -L -3G  /dev/mapper/data-datalv

### 后记

###若需要把缩小的空间用于挂载到其它卷则可以参考 挂载磁盘 的 lvcreate 以下部分

###若磁盘缩容后进行 卸载(umount) 再进行挂载 (mount) 发现挂载不上去，则代表逻辑卷损坏了，这需要强制格式化该卷(mkfs.xfs -f)。