

pom.xml里面的配置

```xml
<!--执行对Jar的混淆-->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
      <execution>
        <phase>package</phase>
        <configuration>
          <target>
            <property name="compile_classpath" refid="maven.compile.classpath"/>
            <property name="runtime_classpath" refid="maven.runtime.classpath"/>
            <property name="test_classpath" refid="maven.test.classpath"/>
            <property name="plugin_classpath" refid="maven.plugin.classpath"/>

            <ant antfile="build.xml">
              <target name="allatori"/>
            </ant>
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
</plugin>
```



build.xml配置

```xml
<?xml version="1.0"?>
<project name="allatori">
    <target name="allatori">
        <taskdef name="allatori" classname="com.allatori.ant.ObfuscatorTask" classpath="${basedir}/allatori/allatori.jar"/>
        <allatori config="${basedir}/allatori/allatori.xml"/>

        <!-- 可以在ant中引用maven中的变量 -->
        <echo message="compile classpath: ${compile_classpath}"/>
        <echo message="runtime classpath: ${runtime_classpath}"/>
        <echo message="test classpath:    ${test_classpath}"/>
        <echo message="plugin classpath:  ${plugin_classpath}"/>
        <echo message="apdplat.version:  ${apdplat.version}"/>
        <!-- For example, to show the path to a dependency with groupId "javax" and artifactId "javaee-api", the following could be used. -->
        <echo message="javaee-api:  ${javax:javaee-api:jar}"/>
    </target>
</project>
```

allatori.xml 配置

```xml
<config>
    <input>
        <jar in="../target/power-auth-${allatori.version}.jar" out="../target/power-auth-${allatori.version}.jar"/>
    </input>
    <!-- 不替换类名、方法名、属性名 -->
    <keep-names>
        <method template="*(**)" parameters="keep"/>
        <class template="class *"/>
        <field template="static final long serialVersionUID"/>

        <class access="protected+">
            <field access="protected+"/>
            <method access="protected+"/>
        </class>
    </keep-names>

</config>
```